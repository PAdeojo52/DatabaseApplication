@page
@model DatabaseApplication.Pages.Registered.LoggedInIndexModel
@{
    Layout = "~/Pages/Shared/_LayoutLoggedIn.cshtml";
    ViewData["Title"] = "Welcome, Registered User!";
}

<<div class="dashboard-overview">
    <h1>Recent Activity</h1>
    <div class="dashboard-cards">
        <div class="card">
            <h2>741</h2>
            <p>Total Items in Stock</p>
        </div>
        <div class="card">
            <h2>123</h2>
            <p>New Orders</p>
        </div>
        <div class="card">
            <h2>12</h2>
            <p>Refunds</p>
        </div>
        <div class="card">
            <h2>1</h2>
            <p>Message</p>
        </div>
        <div class="card">
            <h2>4</h2>
            <p>Groups</p>
        </div>
    </div>

    <div class="dashboard-sections">
        <div class="sales-chart">
            <h2>Total Stock Breakdown</h2>
            <canvas id="stockChart" width="400" height="400"></canvas>
        </div>
        @section Scripts {
            <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>

            <script>
                // Fetch data from Razor Model
                const stockData = {
                    labels: ["Stock In", "Stock Checked Out"],
                    datasets: [{
                        label: 'Stock Breakdown',
                        data: [@Model.TotalStockIn, @Model.TotalStockCheckedOut],
                        backgroundColor: ['#4CAF50', '#FF5722'], // Colors for the chart
                        borderColor: ['#3E8E41', '#E64A19'], // Border colors
                        borderWidth: 1
                    }]
                };

                // Config for the chart
                const config = {
                    type: 'pie',
                    data: stockData,
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function (tooltipItem) {
                                        return tooltipItem.label + ': ' + tooltipItem.raw;
                                    }
                                }
                            }
                        }
                    }
                };

                // Render the chart
                const ctx = document.getElementById('stockChart').getContext('2d');
                new Chart(ctx, config);
            </script>

            <script>
                // Dummy data for the bar chart
                const categoryData = {
                    labels: ["Electronics", "Clothing", "Books", "Toys", "Furniture"], // Category names
                    datasets: [{
                        label: 'Number of Items',
                        data: [50, 75, 20, 40, 30], // Example dummy data
                        backgroundColor: [
                            '#4CAF50',
                            '#FF5722',
                            '#FFC107',
                            '#03A9F4',
                            '#9C27B0'
                        ],
                        borderColor: [
                            '#388E3C',
                            '#D32F2F',
                            '#FFA000',
                            '#0288D1',
                            '#7B1FA2'
                        ],
                        borderWidth: 1
                    }]
                };

                // Configuration for the bar chart
                const categoryChartConfig = {
                    type: 'bar',
                    data: categoryData,
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                };

                // Render the bar chart in the 'categoryChart' canvas
                const categoryChartCtx = document.getElementById('categoryChart').getContext('2d');
                new Chart(categoryChartCtx, categoryChartConfig);
            </script>
        }
        <div class="top-categories">
            <h2>Items by Catagory</h2>
            <canvas id="categoryChart" width="400" height="200"></canvas>



        </div>
    </div>
</div>